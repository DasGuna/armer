

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Setting Joint Velocites &mdash; Armer Driver  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Setting Cartesian Velocites" href="set_cartesian_velocity.html" />
    <link rel="prev" title="Creating a Robotics Toolbox model" href="create_an_RTB_model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2c3e50" >
          

          
            <a href="index.html" class="icon icon-home"> Armer Driver
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="armer_installation.html">Armer Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_a_new_arm.html">Working With A New Arm</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="creating_a_hardware_package.html">Creating a Hardware Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_an_RTB_model.html">Creating a Robotics Toolbox model</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting Joint Velocites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#via-command-line">Via Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="#via-python">Via Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="set_cartesian_velocity.html">Setting Cartesian Velocites</a></li>
<li class="toctree-l1"><a class="reference internal" href="set_joint_position.html">Setting Joint Positions</a></li>
</ul>
<p class="caption"><span class="caption-text">Code:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="API.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Armer Driver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Setting Joint Velocites</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/set_joint_velocity.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-joint-velocites">
<h1>Setting Joint Velocites<a class="headerlink" href="#setting-joint-velocites" title="Permalink to this headline">¶</a></h1>
<p>The Armer API listens to ROS messages published on the <code class="docutils literal notranslate"><span class="pre">/arm/joint/velocity</span></code> topic to interface with joint velocity.</p>
<p>The user can publish to this topic to set the joint velocites of any or all of the joints on a manipulator.</p>
<div class="section" id="via-command-line">
<h2>Via Command Line<a class="headerlink" href="#via-command-line" title="Permalink to this headline">¶</a></h2>
<p>Publishing to the joint velocity topic can be done from the command line.</p>
<p>The ROS command to publish to a topic syntax begins with <code class="docutils literal notranslate"><span class="pre">rostopic</span> <span class="pre">pub</span></code> followed by the topic to publish to, the message type and finally the message itself to publish. This can be greatly simplfied on the command line by using tab to autocomplete.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unfortunately the autocomplete this message type is broken and should be manually corrected from <code class="docutils literal notranslate"><span class="pre">joints:-</span> <span class="pre">0&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;joints:</span> <span class="pre">[0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0]&quot;</span></code> where the number of entries in the joints array corresponds to the number of joints on the manipulator.</p>
</div>
<p>The following code snippet displays an example of setting the velocty of the second joint of the manipulator to rotate at 0.1 rad/s.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">-r</span></code> argument tells the node to publish continuously at 100 Hz. This example will continuously request the second joint of the manipulator to rotate at 0.1 rad/s so the robot will move until killed (<code class="docutils literal notranslate"><span class="pre">ctrl+c</span></code>).</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ rostopic pub -r <span class="m">100</span> /arm/joint/velocity armer_msgs/JointVelocity <span class="s2">&quot;joints: [0.0, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0]&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="via-python">
<h2>Via Python<a class="headerlink" href="#via-python" title="Permalink to this headline">¶</a></h2>
<p>ROS topics can also be published to from a Python script using Rospy, the ROS Python client.</p>
<p>The following code block shows the same command demonstrated in the command line example implemented as a Python3 script. As with the command line example, the node continues to publish the message requesting the velocty of the second joint of the manipulator to rotate at 0.1 rad/s so the manipulator will continue in the direction until the script is killed.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">armer_msgs.msg</span> <span class="kn">import</span> <span class="n">JointVelocity</span>

<span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;armer_example&#39;</span><span class="p">,</span> <span class="n">disable_signals</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">vel_pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;/arm/joint/velocity&#39;</span><span class="p">,</span> <span class="n">JointVelocity</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vel_msg</span> <span class="o">=</span> <span class="n">JointVelocity</span><span class="p">()</span>
<span class="n">vel_msg</span><span class="o">.</span><span class="n">joints</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">vel_pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel_msg</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="set_cartesian_velocity.html" class="btn btn-neutral float-right" title="Setting Cartesian Velocites" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="create_an_RTB_model.html" class="btn btn-neutral float-left" title="Creating a Robotics Toolbox model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Gavin Suddrey.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>